<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>microG Google Account Login fix, take two</title>
  
  <meta name="description" content="microG Google Account Login fix, take two" />
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="alternate" type="application/rss+xml" title="CalyxOS" href="/feed.xml">
  <script src="/assets/js/main.js" defer></script>
  
  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon/favicon-16x16.png">
<link rel="manifest" href="/assets/images/favicon/site.webmanifest">
<link rel="shortcut icon" href="/assets/images/favicon/favicon.ico">
<meta name="apple-mobile-web-app-title" content="CalyxOS">
<meta name="application-name" content="CalyxOS">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/images/favicon/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

</head>

  <body>
    <header>
  <div class="wrapper">
    <div class="logoMark emptyLogo"></div>
    <h1 class="logo"><a class="navbar-brand" href="/">CalyxOS</a></h1>
    <label class="clickable toggle search-toggle" for="search-checkbox" tabindex="0" role="button" aria-label="search"><i class="icon search"></i></label>
    <div class="search">
      <input type="checkbox" class="toggle modal-state" id="search-checkbox"></input>
      <div id="search" class="modal" style="">
        <label class="clickable toggle search-toggle" for="search-checkbox" title="close" tabindex="0" role="button"><i class="big icon close"></i></label>
        <form action="/search" id="searchform" name="searchform">
          <input type="search" name="q" autofocus="autofocus" placeholder="">
          <button type="submit">
            <i class="icon headerSearch"></i> Search
          </button>
        </form>
      </div>
    </div>
    <nav class="navbar">
      <input type="checkbox" class="toggle" id="navbar-visible"></input>
      <ul class="navbar-nav">
        <li class="nav-level-0 nav-item"><a class="nav-level-0 nav-link " href="/features/">Features</a></li>
<li class="nav-level-0 nav-item"><a class="nav-level-0 nav-link " href="/community/">Community</a></li>
<li class="nav-level-0 nav-item"><a class="nav-level-0 nav-link " href="/docs/">Documentation</a></li>
<li class="nav-level-0 nav-item"><a class="nav-level-0 nav-link active" href="/news/">News</a></li>
        <li><a role="button" class="btn primaryBtn" href="/get">Get CalyxOS</a></li>
      </ul>
      <label class="clickable toggle navbar-toggle" for="navbar-visible" role="button" aria-label="navigation"></label>
    </nav>
  </div>
</header>

    <main>
      <section class="secondaryIntro">
        <div class="wrapper">
          <h1><span class="highlighter">microG Google Account Login fix, take two</span></h1>
          
        </div>
      </section>
      <section class="content primaryContent wrapper">
        
        <p>CalyxOS includes <a href="https://microg.org/">microG</a> by default, and you get <a href="/docs/guide/microg/">three choices</a>. You can either keep it enabled (the default), disable it, or login with a Google account.</p>

<p>The latter has been reported to have some issues. We tried to include a potential fix with the <a href="/news/2021/04/08/big-april-update/">April build</a>, but that didn’t work for everyone.</p>

<p>We have been testing a bunch of fixes and finally have something that should hopefully work for everyone. It’s based on code from Vanced microG, which from what we’ve heard seems to work for everyone.</p>

<p>It is now available for testing in our device-specific test F-Droid repos.</p>

<p>These F-Droid repositories get app updates as soon as they’re available, you can add this if you want to help us test them out.</p>

<p>To add it and install the update, simply add the right URL for your device to F-Droid -&gt; Settings -&gt; Repositories -&gt; Plus sign at the top right</p>

<p>You can then try to sign-in to microG by launching it and tapping “Add Account”, and then choosing “Alt Sign in” - that will use this new method to login.</p>

<p>If you want to help, you can let us know what worked for you and what didn’t, through <a href="https://www.reddit.com/r/CalyxOS/">Reddit</a> or <a href="https://matrix.to/#/#CalyxOS:matrix.org">Matrix</a>. For more details, see <a href="/community/">Community</a>.</p>

<p><br />
F-Droid test repos:</p>
<table class="table table-striped download">
  <tr><th>Device</th><th>URL</th><th>QR Code</th></tr>


  <tr>
    <td>bramble</td>
    <td><a href="https://calyxos.gitlab.io/calyx-fdroid-repo-bramble/fdroid/repo?fingerprint=C44D58B4547DE5096138CB0B34A1CC99DAB3B4274412ED753FCCBFC11DC1B7B6">https://calyxos.gitlab.io/calyx-fdroid-repo-bramble/fdroid/repo</a></td>
    <td><a href="/assets/images/gitlab-calyx-fdroid-repo-bramble-qrcode.png">Click to view</a></td>
  </tr>

  <tr>
    <td>redfin</td>
    <td><a href="https://calyxos.gitlab.io/calyx-fdroid-repo-redfin/fdroid/repo?fingerprint=C44D58B4547DE5096138CB0B34A1CC99DAB3B4274412ED753FCCBFC11DC1B7B6">https://calyxos.gitlab.io/calyx-fdroid-repo-redfin/fdroid/repo</a></td>
    <td><a href="/assets/images/gitlab-calyx-fdroid-repo-redfin-qrcode.png">Click to view</a></td>
  </tr>

  <tr>
    <td>sunfish</td>
    <td><a href="https://calyxos.gitlab.io/calyx-fdroid-repo-sunfish/fdroid/repo?fingerprint=C44D58B4547DE5096138CB0B34A1CC99DAB3B4274412ED753FCCBFC11DC1B7B6">https://calyxos.gitlab.io/calyx-fdroid-repo-sunfish/fdroid/repo</a></td>
    <td><a href="/assets/images/gitlab-calyx-fdroid-repo-sunfish-qrcode.png">Click to view</a></td>
  </tr>

  <tr>
    <td>coral</td>
    <td><a href="https://calyxos.gitlab.io/calyx-fdroid-repo-coral/fdroid/repo?fingerprint=C44D58B4547DE5096138CB0B34A1CC99DAB3B4274412ED753FCCBFC11DC1B7B6">https://calyxos.gitlab.io/calyx-fdroid-repo-coral/fdroid/repo</a></td>
    <td><a href="/assets/images/gitlab-calyx-fdroid-repo-coral-qrcode.png">Click to view</a></td>
  </tr>

  <tr>
    <td>flame</td>
    <td><a href="https://calyxos.gitlab.io/calyx-fdroid-repo-flame/fdroid/repo?fingerprint=C44D58B4547DE5096138CB0B34A1CC99DAB3B4274412ED753FCCBFC11DC1B7B6">https://calyxos.gitlab.io/calyx-fdroid-repo-flame/fdroid/repo</a></td>
    <td><a href="/assets/images/gitlab-calyx-fdroid-repo-flame-qrcode.png">Click to view</a></td>
  </tr>

  <tr>
    <td>bonito</td>
    <td><a href="https://calyxos.gitlab.io/calyx-fdroid-repo-bonito/fdroid/repo?fingerprint=C44D58B4547DE5096138CB0B34A1CC99DAB3B4274412ED753FCCBFC11DC1B7B6">https://calyxos.gitlab.io/calyx-fdroid-repo-bonito/fdroid/repo</a></td>
    <td><a href="/assets/images/gitlab-calyx-fdroid-repo-bonito-qrcode.png">Click to view</a></td>
  </tr>

  <tr>
    <td>sargo</td>
    <td><a href="https://calyxos.gitlab.io/calyx-fdroid-repo-sargo/fdroid/repo?fingerprint=C44D58B4547DE5096138CB0B34A1CC99DAB3B4274412ED753FCCBFC11DC1B7B6">https://calyxos.gitlab.io/calyx-fdroid-repo-sargo/fdroid/repo</a></td>
    <td><a href="/assets/images/gitlab-calyx-fdroid-repo-sargo-qrcode.png">Click to view</a></td>
  </tr>

  <tr>
    <td>crosshatch</td>
    <td><a href="https://calyxos.gitlab.io/calyx-fdroid-repo-crosshatch/fdroid/repo?fingerprint=C44D58B4547DE5096138CB0B34A1CC99DAB3B4274412ED753FCCBFC11DC1B7B6">https://calyxos.gitlab.io/calyx-fdroid-repo-crosshatch/fdroid/repo</a></td>
    <td><a href="/assets/images/gitlab-calyx-fdroid-repo-crosshatch-qrcode.png">Click to view</a></td>
  </tr>

  <tr>
    <td>blueline</td>
    <td><a href="https://calyxos.gitlab.io/calyx-fdroid-repo-blueline/fdroid/repo?fingerprint=C44D58B4547DE5096138CB0B34A1CC99DAB3B4274412ED753FCCBFC11DC1B7B6">https://calyxos.gitlab.io/calyx-fdroid-repo-blueline/fdroid/repo</a></td>
    <td><a href="/assets/images/gitlab-calyx-fdroid-repo-blueline-qrcode.png">Click to view</a></td>
  </tr>

  <tr>
    <td>taimen</td>
    <td><a href="https://calyxos.gitlab.io/calyx-fdroid-repo-taimen/fdroid/repo?fingerprint=C44D58B4547DE5096138CB0B34A1CC99DAB3B4274412ED753FCCBFC11DC1B7B6">https://calyxos.gitlab.io/calyx-fdroid-repo-taimen/fdroid/repo</a></td>
    <td><a href="/assets/images/gitlab-calyx-fdroid-repo-taimen-qrcode.png">Click to view</a></td>
  </tr>

  <tr>
    <td>walleye</td>
    <td><a href="https://calyxos.gitlab.io/calyx-fdroid-repo-walleye/fdroid/repo?fingerprint=C44D58B4547DE5096138CB0B34A1CC99DAB3B4274412ED753FCCBFC11DC1B7B6">https://calyxos.gitlab.io/calyx-fdroid-repo-walleye/fdroid/repo</a></td>
    <td><a href="/assets/images/gitlab-calyx-fdroid-repo-walleye-qrcode.png">Click to view</a></td>
  </tr>

  <tr>
    <td>jasmine_sprout</td>
    <td><a href="https://calyxos.gitlab.io/calyx-fdroid-repo-jasmine_sprout/fdroid/repo?fingerprint=C44D58B4547DE5096138CB0B34A1CC99DAB3B4274412ED753FCCBFC11DC1B7B6">https://calyxos.gitlab.io/calyx-fdroid-repo-jasmine_sprout/fdroid/repo</a></td>
    <td><a href="/assets/images/gitlab-calyx-fdroid-repo-jasmine_sprout-qrcode.png">Click to view</a></td>
  </tr>

</table>

<p><br /></p>

<p>Technical:</p>

<p>We enable device registration and cloud messaging for microG by default to make sure that notifications work out of the box.</p>

<p>The <a href="https://review.calyxos.org/c/CalyxOS/platform_external_microg_GmsCore/+/2905">fix</a> included in the [April build](/news/2021/04/08/big-april-update/ tried to disable those two before login, and then re-enable them after login. It seemed to work in some cases, not all.</p>

<p>At the same time, we had heard that <a href="https://github.com/YTVanced/VancedMicroG">Vanced microG</a> had this Huawei login button which seemed to work for everyone. We had already looked at that code once, so we decided to try that approach.</p>

<p>At first, we <a href="https://review.calyxos.org/c/CalyxOS/platform_external_microg_GmsCore/+/3074">tried</a> to spoof just the ‘brand’ reported. AOSP sets it to Android, Google sets it to Google. Didn’t work.</p>

<p>Next, we thought it might be the fingerprint (which contains the build info). Both brand and fingerprint are usually spoofed on custom ROMs for Google Play compatiblity, so we thought that might be it. <a href="https://review.calyxos.org/c/CalyxOS/platform_external_microg_GmsCore/+/3120">Tried</a>, didn’t work.</p>

<p>After that we decided <a href="https://review.calyxos.org/c/CalyxOS/platform_external_microg_GmsCore/+/3016">trying</a> to spoof all of the device details like microG does, didn’t work.</p>

<p>Finally, we settled on just <a href="https://review.calyxos.org/c/CalyxOS/platform_external_microg_GmsCore/+/3125">pulling in</a> the full code from Vanced (something we wanted to do at first but decided to see if the other approaches worked.).
This is what is being shipped in the APK now.</p>

<p>Note: If you take a brief look at the code, it may seem like microG is sending a lot of details about your device to Google. However, if you look closer, it spoofs a lot of that (it doesn’t even have access to things like the serial number), which means most of the data it sends to Google would match exactly with other devices, making it hard to pick you out.</p>


      </section>
    </main>
    <footer>
      
<div class="shade">
  <div class="wrapper">
    <div class="row">
      <ul>
        <li><a href="https://calyxinstitute.org/about">About Calyx</a></li>
        <li><a href="https://members.calyxinstitute.org/enroll/membership/phone">Join Calyx</a></li>
        <li><a href="https://calyxinstitute.org/about/contact-us">Contact Us</a></li>
        <li><a href="https://calyxinstitute.org/legal/privacy-policy">Privacy Policy</a></li>
        <li><a href="https://calyxinstitute.org/legal/terms-of-service">Terms of Service</a></li>
        <li><a href="https://members.calyxinstitute.org/donate">Donate</a></li>
      </ul>
    </div>
    <div class="row footer-icons">
      <a href="https://app.element.io/#/room/#calyxos:matrix.org" title="CalyxOS chat room">
        <img class="filter-grey" src="/assets/images/icons/matrix.svg" />
      </a>
      <a href="https://gitlab.com/CalyxOS" title="CalyxOS source code">
        <img class="filter-grey" src="/assets/images/icons/git.svg" />
      </a>
      <a href="https://twitter.com/CalyxOS" title="CalyxOS on Twitter">
        <img class="filter-grey" src="/assets/images/icons/twitter.svg" />
      </a>
      <a rel="me" href="https://fosstodon.org/@calyxos" title="CalyxOS on Mastodon">
        <img class="filter-grey" src="/assets/images/icons/mastodon.svg" />
      </a>
      <a href="https://reddit.com/r/CalyxOS" title="CalyxOS on Reddit">
        <img class="filter-grey" src="/assets/images/icons/reddit.svg" />
      </a>
      <a href="https://facebook.com/calyxinstitute" title="Calyx Institute on Facebook">
        <img class="filter-grey" src="/assets/images/icons/facebook.svg" />
      </a>
      <a href="https://instagram.com/calyxinsta" title="Calyx Institute on Instagram">
        <img class="filter-grey" src="/assets/images/icons/instagram.svg" />
      </a>
    </div>
    <div class="row">
      <a href="https://calyxinstitute.org" target="_blank" rel="noreferrer nooopener">&copy; 2021-2024 Calyx Institute</a>
      <span class="spacer" aria-hidden="true">&bull;</span>
      <a target="_blank" href="https://review.calyxos.org/admin/repos/edit/repo/CalyxOS/calyxos.org/branch/refs/heads/main/file/pages/_posts/2021-04-16-microg-google-login.md">Edit page</a>
    </div>
    <div class="row">
      <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer nofollow" title="License: Attribution-ShareAlike 4.0 International"><img class="filter-grey" style="height: 24px" src="/assets/images/icons/cc-by-sa.svg" /></a>
    </div>
  </div>
</div>

    </footer>
  </body>
</html>
