<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>microG push notification fixes for Android 12</title>
  
  <meta name="description" content="microG push notification fixes for Android 12" />
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="alternate" type="application/rss+xml" title="CalyxOS" href="/feed.xml">
  <script src="/assets/js/main.js" defer></script>
  
  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon/favicon-16x16.png">
<link rel="manifest" href="/assets/images/favicon/site.webmanifest">
<link rel="shortcut icon" href="/assets/images/favicon/favicon.ico">
<meta name="apple-mobile-web-app-title" content="CalyxOS">
<meta name="application-name" content="CalyxOS">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/images/favicon/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

</head>

  <body>
    <header>
  <div class="wrapper">
    <div class="logoMark emptyLogo"></div>
    <h1 class="logo"><a class="navbar-brand" href="/">CalyxOS</a></h1>
    <label class="clickable toggle search-toggle" for="search-checkbox" tabindex="0" role="button" aria-label="search"><i class="icon search"></i></label>
    <div class="search">
      <input type="checkbox" class="toggle modal-state" id="search-checkbox"></input>
      <div id="search" class="modal" style="">
        <label class="clickable toggle search-toggle" for="search-checkbox" title="close" tabindex="0" role="button"><i class="big icon close"></i></label>
        <form action="/search" id="searchform" name="searchform">
          <input type="search" name="q" autofocus="autofocus" placeholder="">
          <button type="submit">
            <i class="icon headerSearch"></i> Search
          </button>
        </form>
      </div>
    </div>
    <nav class="navbar">
      <input type="checkbox" class="toggle" id="navbar-visible"></input>
      <ul class="navbar-nav">
        <li class="nav-level-0 nav-item"><a class="nav-level-0 nav-link " href="/features/">Features</a></li>
<li class="nav-level-0 nav-item"><a class="nav-level-0 nav-link " href="/community/">Community</a></li>
<li class="nav-level-0 nav-item"><a class="nav-level-0 nav-link " href="/docs/">Documentation</a></li>
<li class="nav-level-0 nav-item"><a class="nav-level-0 nav-link active" href="/news/">News</a></li>
        <li><a role="button" class="btn primaryBtn" href="/install">Get CalyxOS</a></li>
      </ul>
      <label class="clickable toggle navbar-toggle" for="navbar-visible" role="button" aria-label="navigation"></label>
    </nav>
  </div>
</header>

    <main>
      <section class="secondaryIntro">
        <div class="wrapper">
          <h1><span class="highlighter">microG push notification fixes for Android 12</span></h1>
          
        </div>
      </section>
      <section class="content primaryContent wrapper">
        
        <p>We’ve seen the many reports of push notification delays, and experienced them ourselves as well.</p>

<p>We believe we’ve managed to fix the issue, and a test <a href="https://calyxos.gitlab.io/calyx-fdroid-repo/fdroid/repo/GmsCore.apk">APK</a> is now available.</p>

<p>You can get it from our test F-Droid repo, <a href="https://gitlab.com/CalyxOS/calyx-fdroid-repo">https://gitlab.com/CalyxOS/calyx-fdroid-repo</a></p>

<p>To add it, simply add this URL to F-Droid -&gt; Settings -&gt; Repositories -&gt; Plus sign at the top right: <a href="https://calyxos.gitlab.io/calyx-fdroid-repo/fdroid/repo?fingerprint=C44D58B4547DE5096138CB0B34A1CC99DAB3B4274412ED753FCCBFC11DC1B7B6">https://calyxos.gitlab.io/calyx-fdroid-repo/fdroid/repo?fingerprint=C44D58B4547DE5096138CB0B34A1CC99DAB3B4274412ED753FCCBFC11DC1B7B6</a></p>

<p>Alternatively, you can scan the below QR code:</p>

<p><img src="/assets/images/gitlab-calyx-fdroid-repo-qrcode.png" alt="gitlab-calyx-fdroid-repo" class="img-fluid" /></p>

<p>The changes included have all been sent to microG upstream for integration in the codebase so that everyone can benefit.</p>

<ul>
  <li><a href="https://github.com/microg/GmsCore/pull/1681">https://github.com/microg/GmsCore/pull/1681</a></li>
</ul>

<p>We will continue observing push notification behaviour, and update things as needed.</p>

<h3 id="technical">Technical</h3>

<p>With all the <a href="/news/2021/10/13/microg-push-notifications/">push notification fixes</a> we’ve done previously, push notifications were indeed working fine - microG was getting the messages on time from Google.</p>

<p>However the way Signal sets up push notifications with Google Cloud Messaging / microG is quite smart - it does not send any data at all through Google, just the fact that there is a notification.</p>

<p>Literally, <code class="language-plaintext highlighter-rouge">AppData{key=notification, value=}</code> is what it gets.</p>

<p>On receiving that, Signal contacts their own servers to get the encrypted notification content directly, and then decrypts it on device.</p>

<p>However, Android is very restrictive of what apps can do in the background to improve battery life, and as such that last part wasn’t working. microG does have the code to temporarily allow the app to do what’s needed when it gets a notification, however it wasn’t working on Android 12. The <a href="https://github.com/microg/GmsCore/pull/1681">patch</a> fixes that by using a new, different API to perform that on 12, thus preventing notification delays.</p>


      </section>
    </main>
    <footer>
      
<div class="shade">
  <div class="wrapper">
    <div class="row">
      <ul>
        <li><a href="https://calyxinstitute.org/about">About Calyx</a></li>
        <li><a href="https://calyxinstitute.org/membership">Join Calyx</a></li>
        <li><a href="https://calyxinstitute.org/about/contact-us">Contact Us</a></li>
        <li><a href="https://calyxinstitute.org/legal/privacy-policy">Privacy Policy</a></li>
        <li><a href="https://calyxinstitute.org/legal/terms-of-service">Terms of Service</a></li>
        <li><a href="https://members.calyxinstitute.org/donate">Donate</a></li>
      </ul>
    </div>
    <div class="row footer-icons">
      <a href="https://app.element.io/#/room/#calyxos:matrix.org" title="CalyxOS chat room">
        <img class="filter-grey" src="/assets/images/icons/matrix.svg" />
      </a>
      <a href="https://gitlab.com/CalyxOS" title="CalyxOS source code">
        <img class="filter-grey" src="/assets/images/icons/git.svg" />
      </a>
      <a href="https://twitter.com/calyxinstitute" title="Calyx Institute on Twitter">
        <img class="filter-grey" src="/assets/images/icons/twitter.svg" />
      </a>
      <a rel="me" href="https://mastodon.social/@calyxinstitute" title="Calyx Institute on Mastodon">
        <img class="filter-grey" src="/assets/images/icons/mastodon.svg" />
      </a>
      <a href="https://reddit.com/r/CalyxOS" title="CalyxOS on Reddit">
        <img class="filter-grey" src="/assets/images/icons/reddit.svg" />
      </a>
      <a href="https://facebook.com/calyxinstitute" title="Calyx Institute on Facebook">
        <img class="filter-grey" src="/assets/images/icons/facebook.svg" />
      </a>
      <a href="https://instagram.com/calyxinsta" title="Calyx Institute on Instagram">
        <img class="filter-grey" src="/assets/images/icons/instagram.svg" />
      </a>
    </div>
    <div class="row">
      <a href="https://calyxinstitute.org" target="_blank" rel="noreferrer nooopener">&copy; 2021-2025 Calyx Institute</a>
      <span class="spacer" aria-hidden="true">&bull;</span>
      <a target="_blank" href="https://review.calyxos.org/admin/repos/edit/repo/CalyxOS/calyxos.org/branch/refs/heads/main/file/pages/_posts/2022-03-03-microg-android-12.md">Edit page</a>
    </div>
    <div class="row">
      <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer nofollow" title="License: Attribution-ShareAlike 4.0 International"><img class="filter-grey" style="height: 24px" src="/assets/images/icons/cc-by-sa.svg" /></a>
    </div>
  </div>
</div>

    </footer>
  </body>
</html>
