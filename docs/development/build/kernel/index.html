<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Building the Linux kernel for CalyxOS</title>
  
  <meta name="description" content="Building the Linux kernel for CalyxOS" />
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="alternate" type="application/rss+xml" title="CalyxOS" href="/feed.xml">
  <script src="/assets/js/main.js" defer></script>
  
  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon/favicon-16x16.png">
<link rel="manifest" href="/assets/images/favicon/site.webmanifest">
<link rel="shortcut icon" href="/assets/images/favicon/favicon.ico">
<meta name="apple-mobile-web-app-title" content="CalyxOS">
<meta name="application-name" content="CalyxOS">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/images/favicon/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

</head>

  <body>
    <header>
  <div class="wrapper">
    <div class="logoMark emptyLogo"></div>
    <h1 class="logo"><a class="navbar-brand" href="/">CalyxOS</a></h1>
    <label class="clickable toggle search-toggle" for="search-checkbox" tabindex="0" role="button" aria-label="search"><i class="icon search"></i></label>
    <div class="search">
      <input type="checkbox" class="toggle modal-state" id="search-checkbox"></input>
      <div id="search" class="modal" style="">
        <label class="clickable toggle search-toggle" for="search-checkbox" title="close" tabindex="0" role="button"><i class="big icon close"></i></label>
        <form action="/search" id="searchform" name="searchform">
          <input type="search" name="q" autofocus="autofocus" placeholder="">
          <button type="submit">
            <i class="icon headerSearch"></i> Search
          </button>
        </form>
      </div>
    </div>
    <nav class="navbar">
      <input type="checkbox" class="toggle" id="navbar-visible"></input>
      <ul class="navbar-nav">
        <li class="nav-level-0 nav-item"><a class="nav-level-0 nav-link " href="/features/">Features</a></li>
<li class="nav-level-0 nav-item"><a class="nav-level-0 nav-link " href="/community/">Community</a></li>
<li class="nav-level-0 nav-item"><a class="nav-level-0 nav-link active" href="/docs/">Documentation</a></li>
<li class="nav-level-0 nav-item"><a class="nav-level-0 nav-link " href="/news/">News</a></li>
        <li><a role="button" class="btn primaryBtn" href="/get">Get CalyxOS</a></li>
      </ul>
      <label class="clickable toggle navbar-toggle" for="navbar-visible" role="button" aria-label="navigation"></label>
    </nav>
  </div>
</header>

    <main>
      <section class="secondaryIntro">
        <div class="wrapper sidebar-spacing">
          <h1><span class="highlighter">Building the Linux kernel for CalyxOS</span></h1>


        </div>
      </section>
      <div class="wrapper sidebar">
        <div class="navside">
  <ul class="">


<li class="nav-level-1 nav-item"><a class="nav-level-1 nav-link " href="/docs/about/">About</a></li>
<li class="nav-level-1 nav-item"><a class="nav-level-1 nav-link " href="/docs/guide/">User Guide</a></li>
<li class="nav-level-1 nav-item"><a class="nav-level-1 nav-link " href="/docs/tech/">Tech</a></li>
<li class="nav-level-1 nav-item"><a class="nav-level-1 nav-link " href="/docs/development/">Development</a></li><li class="nav-level-2 nav-item"><a class="nav-level-2 nav-link " href="/docs/development/contribute/">Contribute</a></li>
<li class="nav-level-2 nav-item"><a class="nav-level-2 nav-link " href="/docs/development/gerrit/">Gerrit</a></li>
<li class="nav-level-2 nav-item"><a class="nav-level-2 nav-link " href="/docs/development/build/">Build</a></li><li class="nav-level-3 nav-item"><a class="nav-level-3 nav-link " href="/docs/development/build/app-microg/">Build microG</a></li>
<li class="nav-level-3 nav-item"><a class="nav-level-3 nav-link " href="/docs/development/build/chromium/">Build Chromium</a></li>
<li class="nav-level-3 nav-item"><a class="nav-level-3 nav-link " href="/docs/development/build/emulator/">Emulator</a></li>
<li class="nav-level-3 nav-item"><a class="nav-level-3 nav-link active" href="/docs/development/build/kernel/">Build kernel</a></li>
<li class="nav-level-3 nav-item"><a class="nav-level-3 nav-link " href="/docs/development/build/production/">Production</a></li>
<li class="nav-level-3 nav-item"><a class="nav-level-3 nav-link " href="/docs/development/build/sign/">Sign</a></li>

  </ul>
</div>

        <section class="content primaryContent">
          
          <p>CalyxOS uses Google’s Android Linux kernel with some additional modifications for certain features on top. It can be built within the CalyxOS sources, either during the OS build process, or separately using Google’s build scripts.</p>

<h2 id="kernel-build">Kernel build</h2>
<ul>
  <li>This is the process used for official builds, since
    <ul>
      <li>The kernel is shared between Pixels of the same family. Which means 1 kernel build usually ends up covering 2 devices (e.g. Pixel 6 and 6 Pro share the kernel)</li>
      <li>The kernel usually does not change that often, so it’s beneficial to build it separately to avoid having to build the exact same source code every time.</li>
      <li>Google uses the same model, in fact we’re using their scripts and setup.</li>
    </ul>
  </li>
</ul>

<h3 id="download-the-source-code">Download the source code</h3>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> ~/calyxos/kernel.android13
<span class="nb">cd</span> ~/calyxos/kernel.android13
repo init <span class="nt">-u</span> https://gitlab.com/CalyxOS/kernel_manifest <span class="nt">-b</span> android13
repo <span class="nb">sync</span> <span class="nt">-j8</span> <span class="c"># You may use a higher number here if you have a fast computer and fast internet</span>
</code></pre></div></div>

<h3 id="building">Building</h3>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./build_kernel.sh sunfish <span class="c"># Replace sunfish (Pixel 4a) with your device codename</span>
</code></pre></div></div>

<p>This will build the kernel, and it also copies it to the corect directory directly (<code class="language-plaintext highlighter-rouge">device/google/sunfish-kernel</code> for Pixel 4a).</p>

<p>Copy that to the OS source code for it to get included in the builds</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cp</span> <span class="nt">-a</span> ~/calyxos/kernel.android13/device/google/sunfish-kernel ~/calyxos/android13/device/google/
</code></pre></div></div>


        </section>
      </div>
    </main>
    <footer>
      
<div class="shade">
  <div class="wrapper">
    <div class="row">
      <ul>
        <li><a href="https://calyxinstitute.org/about">About Calyx</a></li>
        <li><a href="https://members.calyxinstitute.org/enroll/membership/phone">Join Calyx</a></li>
        <li><a href="https://calyxinstitute.org/about/contact-us">Contact Us</a></li>
        <li><a href="https://calyxinstitute.org/legal/privacy-policy">Privacy Policy</a></li>
        <li><a href="https://calyxinstitute.org/legal/terms-of-service">Terms of Service</a></li>
        <li><a href="https://members.calyxinstitute.org/donate">Donate</a></li>
      </ul>
    </div>
    <div class="row footer-icons">
      <a href="https://app.element.io/#/room/#calyxos:matrix.org" title="CalyxOS chat room">
        <img class="filter-grey" src="/assets/images/icons/matrix.svg" />
      </a>
      <a href="https://gitlab.com/CalyxOS" title="CalyxOS source code">
        <img class="filter-grey" src="/assets/images/icons/git.svg" />
      </a>
      <a href="https://twitter.com/CalyxOS" title="CalyxOS on Twitter">
        <img class="filter-grey" src="/assets/images/icons/twitter.svg" />
      </a>
      <a rel="me" href="https://fosstodon.org/@calyxos" title="CalyxOS on Mastodon">
        <img class="filter-grey" src="/assets/images/icons/mastodon.svg" />
      </a>
      <a href="https://reddit.com/r/CalyxOS" title="CalyxOS on Reddit">
        <img class="filter-grey" src="/assets/images/icons/reddit.svg" />
      </a>
      <a href="https://facebook.com/calyxinstitute" title="Calyx Institute on Facebook">
        <img class="filter-grey" src="/assets/images/icons/facebook.svg" />
      </a>
      <a href="https://instagram.com/calyxinsta" title="Calyx Institute on Instagram">
        <img class="filter-grey" src="/assets/images/icons/instagram.svg" />
      </a>
    </div>
    <div class="row">
      <a href="https://calyxinstitute.org" target="_blank" rel="noreferrer nooopener">&copy; 2021-2024 Calyx Institute</a>
      <span class="spacer" aria-hidden="true">&bull;</span>
      <a target="_blank" href="https://review.calyxos.org/admin/repos/edit/repo/CalyxOS/calyxos.org/branch/refs/heads/main/file/pages/docs/development/build/kernel/index.md">Edit page</a>
    </div>
    <div class="row">
      <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer nofollow" title="License: Attribution-ShareAlike 4.0 International"><img class="filter-grey" style="height: 24px" src="/assets/images/icons/cc-by-sa.svg" /></a>
    </div>
  </div>
</div>

    </footer>
  </body>
</html>
